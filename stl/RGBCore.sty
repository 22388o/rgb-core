{-
  Id: Ec6MZgfygYgPLyPCYWZqp9bEXmswd9c5NHrwL5UwwkpR
  Name: RGBCore
  Description: Consensus layer for RGB smart contracts
  Author: Dr Maxim Orlovsky <orlovsky@lnp-bp.org>
  Copyright (C) 2023 LNP/BP Standards Association. All rights reserved.
  License: Apache-2.0
-}

typelib RGB -- absorb_spring_product_Ec6MZgfygYgPLyPCYWZqp9bEXmswd9c5NHrwL5UwwkpR

import eric_pablo_junior_6dNLcuqHACv1yYndmvNnXHuP7g3DV4qVkSf9tou6cDBm as StrictTypes
import oberon_parker_cobra_GVur9D96gWvVkXNkss6nTXn3qyLG4tvT3G7AeLwFZACo as Bitcoin
import ford_lola_silicon_4F7Jgi9L55LqH1eNkUmLRFbRJ9nhcDRHbCXpp2buuTub as BPCore


data AssignedState_AttachmentPair  :: confidential (seal BPCore.ConcealedSeal, state Confidential)
                                    | confidentialState (seal BPCore.RevealedSeal, state Confidential)
                                    | confidentialSeal (seal BPCore.ConcealedSeal, state Revealed)
                                    | revealed (seal BPCore.RevealedSeal, state Revealed)
data AssignedState_DeclarativePair :: confidential (seal BPCore.ConcealedSeal, state BPCore.ConcealedSeal)
                                    | confidentialState (seal BPCore.RevealedSeal, state BPCore.RevealedSeal)
                                    | confidentialSeal (seal BPCore.ConcealedSeal, state BPCore.ConcealedSeal)
                                    | revealed (seal BPCore.RevealedSeal, state BPCore.RevealedSeal)
data AssignedState_FungiblePair    :: confidential (seal BPCore.ConcealedSeal, state Confidential)
                                    | confidentialState (seal BPCore.RevealedSeal, state Confidential)
                                    | confidentialSeal (seal BPCore.ConcealedSeal, state Revealed)
                                    | revealed (seal BPCore.RevealedSeal, state Revealed)
data AssignedState_StructuredPair  :: confidential (seal BPCore.ConcealedSeal, state Confidential)
                                    | confidentialState (seal BPCore.RevealedSeal, state Confidential)
                                    | confidentialSeal (seal BPCore.ConcealedSeal, state Revealed)
                                    | revealed (seal BPCore.RevealedSeal, state Revealed)

data BundleItem       :: inputs {U16 ^ ..0xff}, transition Transition?
data Confidential     :: commitment PedersenCommitment, rangeProof RangeProof
data ContractId       :: [U8 ^ 32]
data Extension        :: ffv Ffv, extensionType U16, contractId ContractId, metadata [U8 ^ ..0xff]?, globalState GlobalState, ownedState OwnedState, redeemed {[Byte ^ 32] -> ^ ..0xff {U16 ^ ..0xff}}, valencies {U16 ^ ..0xff}
data ExtensionSchema  :: metadata StrictTypes.SemId?, globalState {U16 -> ^ ..0xff Occurrences}, redeems {U16 ^ ..0xff}, ownedState {U16 -> ^ ..0xff Occurrences}, valencies {U16 ^ ..0xff}
data Ffv              :: U16
data FungibleType     :: unsigned64Bit:8
data Genesis          :: ffv Ffv, schemaId SchemaId, chain Bitcoin.Chain, metadata [U8 ^ ..0xff]?, globalState GlobalState, ownedState OwnedState, valencies {U16 ^ ..0xff}
data GenesisSchema    :: metadata StrictTypes.SemId?, globalState {U16 -> ^ ..0xff Occurrences}, ownedState {U16 -> ^ ..0xff Occurrences}, valencies {U16 ^ ..0xff}
data GlobalState      :: {U16 -> ^ ..0xff GlobalValues}
data GlobalValues     :: [Revealed ^ 1..0xff]
data NoiseDumb        :: [U8 ^ 512]
data Occurrences      :: min U16, max U16
data OpId             :: [U8 ^ 32]
data OwnedState       :: {U16 -> ^ ..0xff TypedState}
data PedersenCommitment :: [U8 ^ 33]
data RangeProof       :: placeholder:255 NoiseDumb
data Revealed         :: [U8]
data Schema           :: ffv Ffv, subsetOf SchemaId?, globalTypes {U16 -> ^ ..0xff StrictTypes.SemId}, ownedTypes {U16 -> ^ ..0xff StateSchema}, valencyTypes {U16 ^ ..0xff}, genesis GenesisSchema, extensions {U16 -> ^ ..0xff ExtensionSchema}, transitions {U16 -> ^ ..0xff TransitionSchema}, typeSystem [U8 ^ ..0xffffff], script Script
data SchemaId         :: [U8 ^ 32]
data Script           :: aluVm [U8 ^ ..0xffffff]
data StateSchema      :: declarative () | fungible FungibleType | structured StrictTypes.SemId | attachment ()
data Transition       :: ffv Ffv, transitionType U16, metadata [U8 ^ ..0xff]?, globalState GlobalState, prevState {[Byte ^ 32] -> ^ ..0xff {U16 -> ^ ..0xff [U16 ^ ..0xff]}}, ownedState OwnedState, valencies {U16 ^ ..0xff}
data TransitionBundle :: {[Byte ^ 32] -> ^ ..0xff BundleItem}
data TransitionSchema :: metadata StrictTypes.SemId?, globalState {U16 -> ^ ..0xff Occurrences}, closes {U16 -> ^ ..0xff Occurrences}, ownedState {U16 -> ^ ..0xff Occurrences}, valencies {U16 ^ ..0xff}
data TypedState       :: declarative [AssignedState_DeclarativePair ^ ..0xffffff] | fungible [AssignedState_FungiblePair ^ ..0xffffff] | structured [AssignedState_StructuredPair ^ ..0xffffff] | attachment:255 [AssignedState_AttachmentPair ^ ..0xffffff]

