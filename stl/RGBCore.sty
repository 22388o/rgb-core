{-
  Id: G93KKQn8zDE7CJwAkdaHcHAdXhFrHbgxnXR6dXLfNSgK
  Name: RGBCore
  Description: Consensus layer for RGB smart contracts
  Author: Dr Maxim Orlovsky <orlovsky@lnp-bp.org>
  Copyright (C) 2023 LNP/BP Standards Association. All rights reserved.
  License: Apache-2.0
-}

typelib RGB -- ralph_single_client_G93KKQn8zDE7CJwAkdaHcHAdXhFrHbgxnXR6dXLfNSgK

import salsa_peace_patron_26G1K9hm6R2BkzGJwHjLC9cB1JFJiAPCDWrJAoRCrkCg as Bitcoin
import danube_cotton_kansas_3xcfudRJUuwQ187puYDdNcxGeTpG8AoHyTrfJ9ryo9k6 as StrictTypes
import sardine_ground_beatles_5GpK1xbT5AT8buj9rEh2Tp7iFJf7rr36qmbbaU39aMWD as AluVM
import human_alarm_video_Hzm5L9FnBnXfocDtyc1i1PmKs1SYXsBQzL4vtd4BVA4S as BPCore


data AluScript        :: libs AluVM.LibId, entryPoints {[Byte ^ 3] -> AluVM.LibSite}
data AssignRevealedAttachBlindSealTxPtr :: confidential (seal BPCore.SecretSeal, state ConcealedAttach)
                       | confidentialState (seal BPCore.BlindSealTxPtr, state ConcealedAttach)
                       | confidentialSeal (seal BPCore.SecretSeal, state RevealedAttach)
                       | revealed (seal BPCore.BlindSealTxPtr, state RevealedAttach)
data AssignRevealedAttachBlindSealTxid :: confidential (seal BPCore.SecretSeal, state ConcealedAttach)
                       | confidentialState (seal BPCore.BlindSealTxid, state ConcealedAttach)
                       | confidentialSeal (seal BPCore.SecretSeal, state RevealedAttach)
                       | revealed (seal BPCore.BlindSealTxid, state RevealedAttach)
data AssignRevealedDataBlindSealTxPtr :: confidential (seal BPCore.SecretSeal, state ConcealedData)
                       | confidentialState (seal BPCore.BlindSealTxPtr, state ConcealedData)
                       | confidentialSeal (seal BPCore.SecretSeal, state RevealedData)
                       | revealed (seal BPCore.BlindSealTxPtr, state RevealedData)
data AssignRevealedDataBlindSealTxid :: confidential (seal BPCore.SecretSeal, state ConcealedData)
                       | confidentialState (seal BPCore.BlindSealTxid, state ConcealedData)
                       | confidentialSeal (seal BPCore.SecretSeal, state RevealedData)
                       | revealed (seal BPCore.BlindSealTxid, state RevealedData)
data AssignRevealedValueBlindSealTxPtr :: confidential (seal BPCore.SecretSeal, state ConcealedFungible)
                       | confidentialState (seal BPCore.BlindSealTxPtr, state ConcealedFungible)
                       | confidentialSeal (seal BPCore.SecretSeal, state RevealedFungible)
                       | revealed (seal BPCore.BlindSealTxPtr, state RevealedFungible)
data AssignRevealedValueBlindSealTxid :: confidential (seal BPCore.SecretSeal, state ConcealedFungible)
                       | confidentialState (seal BPCore.BlindSealTxid, state ConcealedFungible)
                       | confidentialSeal (seal BPCore.SecretSeal, state RevealedFungible)
                       | revealed (seal BPCore.BlindSealTxid, state RevealedFungible)
data AssignVoidStateBlindSealTxPtr :: confidential (seal BPCore.SecretSeal, state VoidState)
                       | confidentialState (seal BPCore.BlindSealTxPtr, state VoidState)
                       | confidentialSeal (seal BPCore.SecretSeal, state VoidState)
                       | revealed (seal BPCore.BlindSealTxPtr, state VoidState)
data AssignVoidStateBlindSealTxid :: confidential (seal BPCore.SecretSeal, state VoidState)
                       | confidentialState (seal BPCore.BlindSealTxid, state VoidState)
                       | confidentialSeal (seal BPCore.SecretSeal, state VoidState)
                       | revealed (seal BPCore.BlindSealTxid, state VoidState)
data AssignmentsBlindSealTxPtr :: {U16 -> ^ ..0xff TypedAssignsBlindSealTxPtr}
data AssignmentsBlindSealTxid :: {U16 -> ^ ..0xff TypedAssignsBlindSealTxid}
data AttachId         :: [U8 ^ 32]
data BlindingFactor   :: [U8 ^ 32]
data BundleItem       :: inputs {U16 ^ ..0xff}, transition Transition?
data ConcealedAttach  :: [U8 ^ 32]
data ConcealedData    :: [U8 ^ 32]
data ConcealedFungible :: commitment PedersenCommitment, rangeProof RangeProof
data ContractId       :: [U8 ^ 32]
data Extension        :: ffv Ffv
                       , extensionType U16
                       , contractId ContractId
                       , metadata [U8]
                       , globals GlobalState
                       , assignments AssignmentsBlindSealTxid
                       , redeemed {U16 -> ^ ..0xff OpId}
                       , valencies {U16 ^ ..0xff}
data ExtensionSchema  :: metadata StrictTypes.SemId
                       , globals {U16 -> ^ ..0xff Occurrences}
                       , redeems {U16 ^ ..0xff}
                       , assignments {U16 -> ^ ..0xff Occurrences}
                       , valencies {U16 ^ ..0xff}
data Ffv              :: U16
data FungibleState    :: bits64:8 U64
data FungibleType     :: unsigned64Bit:8
data Genesis          :: ffv Ffv
                       , schemaId SchemaId
                       , chain Bitcoin.Chain
                       , metadata [U8]
                       , globals GlobalState
                       , assignments AssignmentsBlindSealTxid
                       , valencies {U16 ^ ..0xff}
data GenesisSchema    :: metadata StrictTypes.SemId
                       , globals {U16 -> ^ ..0xff Occurrences}
                       , assignments {U16 -> ^ ..0xff Occurrences}
                       , valencies {U16 ^ ..0xff}
data GlobalState      :: {U16 -> ^ ..0xff GlobalValues}
data GlobalStateSchema :: semId StrictTypes.SemId, maxItems U16
data GlobalValues     :: [RevealedData ^ 1..]
data MediaType        :: any:255
data NoiseDumb        :: [U8 ^ 512]
data Occurrences      :: min U16, max U16
data OpId             :: [U8 ^ 32]
data Opout            :: op OpId
                       , ty U16
                       , no U16
data PedersenCommitment :: [U8 ^ 33]
data RangeProof       :: placeholder:255 NoiseDumb
data RevealedAttach   :: id AttachId
                       , mediaType MediaType
                       , salt U64
data RevealedData     :: [U8]
data RevealedFungible :: value FungibleState, blinding BlindingFactor
data Schema           :: ffv Ffv
                       , subsetOf ()?
                       , globalTypes {U16 -> ^ ..0xff GlobalStateSchema}
                       , ownedTypes {U16 -> ^ ..0xff StateSchema}
                       , valencyTypes {U16 ^ ..0xff}
                       , genesis GenesisSchema
                       , extensions {U16 -> ^ ..0xff ExtensionSchema}
                       , transitions {U16 -> ^ ..0xff TransitionSchema}
                       , typeSystem StrictTypes.TypeSystem
                       , script Script
data SchemaId         :: [U8 ^ 32]
data SchemaSchema     :: ffv Ffv
                       , subsetOf Schema?
                       , globalTypes {U16 -> ^ ..0xff GlobalStateSchema}
                       , ownedTypes {U16 -> ^ ..0xff StateSchema}
                       , valencyTypes {U16 ^ ..0xff}
                       , genesis GenesisSchema
                       , extensions {U16 -> ^ ..0xff ExtensionSchema}
                       , transitions {U16 -> ^ ..0xff TransitionSchema}
                       , typeSystem StrictTypes.TypeSystem
                       , script Script
data Script           :: aluVm AluScript
data StateSchema      :: declarative ()
                       | fungible FungibleType
                       | structured StrictTypes.SemId
                       | attachment MediaType
data Transition       :: ffv Ffv
                       , transitionType U16
                       , metadata [U8]
                       , globals GlobalState
                       , inputs {Opout ^ ..0xff}
                       , assignments AssignmentsBlindSealTxPtr
                       , valencies {U16 ^ ..0xff}
data TransitionBundle :: {[Byte ^ 32] -> ^ ..0xff BundleItem}
data TransitionSchema :: metadata StrictTypes.SemId
                       , globals {U16 -> ^ ..0xff Occurrences}
                       , inputs {U16 -> ^ ..0xff Occurrences}
                       , assignments {U16 -> ^ ..0xff Occurrences}
                       , valencies {U16 ^ ..0xff}
data TypedAssignsBlindSealTxPtr :: declarative [AssignVoidStateBlindSealTxPtr]
                       | fungible [AssignRevealedValueBlindSealTxPtr]
                       | structured [AssignRevealedDataBlindSealTxPtr]
                       | attachment:255 [AssignRevealedAttachBlindSealTxPtr]
data TypedAssignsBlindSealTxid :: declarative [AssignVoidStateBlindSealTxid]
                       | fungible [AssignRevealedValueBlindSealTxid]
                       | structured [AssignRevealedDataBlindSealTxid]
                       | attachment:255 [AssignRevealedAttachBlindSealTxid]
data VoidState        :: ()

